local function setHighlight(player, enabled)
  if player and player.Character and player.Character:FindFirstChild("Humanoid") then
    local character = player.Character
    local outline = character:FindFirstChild("Outline")
    if enabled then
      if not outline then
        outline = character:FindFirstChild("Humanoid:AddAccessory")("Outline")
        outline.Enabled = true
        outline.FillTransparency = 1
        outline.StrokeColor = Color3.fromRGB(255, 255, 0) -- yellow
      end
    else
      if outline then
        outline:Destroy()
      end
    end
  end
end

local userInputService = game:GetService("UserInputService")

userInputService.InputBegan:Connect(function(input, gameProcessedEvent)
  if not gameProcessedEvent then
    local target = workspace:FindRayCast(script.Parent.Parent.Head:GetWorldPosition(), script.Parent.Parent.Head:GetLookVector(), 200, RaycastFilter.new())
    if target and target.Hit and target.Instance.Humanoid then
      local player = target.Instance.Parent:FindFirstChild("Player")
      setHighlight(player, true)
    else
      setHighlight(workspace.FindFirstChild("LocalPlayer"), false)
    end
  end
end)
