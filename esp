-- Function to create the border effect for a player
local function createBorder(player)
    -- Create a part to represent the border
    local borderPart = Instance.new("Part")
    borderPart.Size = Vector3.new(2, 4, 2) -- Adjust the size of the border to your preference
    borderPart.Transparency = 1
    borderPart.Color = Color3.fromRGB(139, 0, 0) -- Dark red color
    borderPart.Anchored = true
    borderPart.CanCollide = false
    borderPart.Parent = workspace

    -- Create a SurfaceGui for the border
    local surfaceGui = Instance.new("SurfaceGui")
    surfaceGui.Face = Enum.NormalId.Back
    surfaceGui.Parent = borderPart

    -- Create a frame inside the SurfaceGui to draw the border
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BorderSizePixel = 0
    frame.BackgroundColor3 = Color3.fromRGB(139, 0, 0) -- Dark red color
    frame.Parent = surfaceGui

    -- Function to update the position of the border
    local function updatePosition()
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            borderPart.Position = player.Character.HumanoidRootPart.Position
        end
    end

    -- Connect the updatePosition function to the player's movements
    player.CharacterAdded:Connect(function(character)
        character.Humanoid:GetPropertyChangedSignal("MoveDirection"):Connect(updatePosition)
    end)

    -- Connect the updatePosition function to the player's removal
    player.CharacterRemoving:Connect(function()
        borderPart:Destroy()
    end)

    -- Initially position the border
    updatePosition()
end

-- Function to create the border for all existing players
local function createBordersForExistingPlayers()
    for _, player in ipairs(game.Players:GetPlayers()) do
        createBorder(player)
    end
end

-- Connect the createBordersForExistingPlayers function to the PlayerAdded event
game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        createBorder(player)
    end)
end)

-- Create borders for existing players when the script starts
createBordersForExistingPlayers()
